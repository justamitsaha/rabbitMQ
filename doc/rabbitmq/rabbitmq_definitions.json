{
  "users": [
    {
      "name": "admin",
      "password": "admin",
      "tags": "administrator"
    }
  ],
  "vhosts": [
    { "name": "/" }
  ],
  "permissions": [
    {
      "user": "admin",
      "vhost": "/",
      "configure": ".*",
      "write": ".*",
      "read": ".*"
    }
  ],
  "exchanges": [
    { "name": "domain.events", "vhost": "/", "type": "topic", "durable": true},
    {"name": "domain.dlx", "vhost": "/", "type": "fanout", "durable": true}
  ],
  "queues": [
    { "name": "order-service-queue", "vhost": "/", "durable": true, "arguments": { "x-dead-letter-exchange": "domain.dlx" }},
    { "name": "payment-service-queue", "vhost": "/", "durable": true, "arguments": { "x-dead-letter-exchange": "domain.dlx" }},
    { "name": "delivery-service-queue", "vhost": "/", "durable": true, "arguments": { "x-dead-letter-exchange": "domain.dlx" }},
    { "name": "notification-service-queue", "vhost": "/", "durable": true, "arguments": { "x-dead-letter-exchange": "domain.dlx" }},
    { "name": "order-service-dlq", "vhost": "/", "durable": true },
    { "name": "payment-service-dlq", "vhost": "/", "durable": true },
    { "name": "delivery-service-dlq", "vhost": "/", "durable": true },
    { "name": "notification-service-dlq", "vhost": "/", "durable": true }
  ],
  "bindings": [

    { "source": "domain.events", "vhost": "/", "destination": "order-service-queue", "destination_type": "queue", "routing_key": "payment.failure" },
    { "source": "domain.events", "vhost": "/", "destination": "order-service-queue", "destination_type": "queue", "routing_key": "delivery.success" },
    { "source": "domain.events", "vhost": "/", "destination": "order-service-queue", "destination_type": "queue", "routing_key": "delivery.failure" },

    { "source": "domain.events", "vhost": "/", "destination": "payment-service-queue", "destination_type": "queue", "routing_key": "payment.created"},
    { "source": "domain.events", "vhost": "/", "destination": "payment-service-queue", "destination_type": "queue", "routing_key": "order.created" },
    { "source": "domain.events", "vhost": "/", "destination": "payment-service-queue", "destination_type": "queue", "routing_key": "delivery.failure" },


    { "source": "domain.events", "vhost": "/", "destination": "delivery-service-queue", "destination_type": "queue", "routing_key": "payment.success" },


    { "source": "domain.events", "vhost": "/", "destination": "notification-service-queue", "destination_type": "queue", "routing_key": "#" },


    { "source": "domain.dlx", "vhost": "/", "destination": "order-service-dlq", "destination_type": "queue" },
    { "source": "domain.dlx", "vhost": "/", "destination": "payment-service-dlq", "destination_type": "queue" },
    { "source": "domain.dlx", "vhost": "/", "destination": "delivery-service-dlq", "destination_type": "queue" },
    { "source": "domain.dlx", "vhost": "/", "destination": "notification-service-dlq", "destination_type": "queue" }
  ]
}
